
# 博弈论

## SG 函数

在一个有向无环图中，只有一个起点，上面有一个棋子，两个玩家轮流沿着有向边推动棋子，不能走的玩家判负。

对于状态 $x$ 和它的所有 $k$ 个后继状态 $y_1, y_2, \ldots, y_k$，定义 $\operatorname{SG}$ 函数：

$$\operatorname{SG}(x)=\operatorname{mex}\{\operatorname{SG}(y_1), \operatorname{SG}(y_2), \ldots, \operatorname{SG}(y_k)\}$$

同时，对于没有后继的节点（必败态），$\operatorname{SG}(x)=0$

对于由 $n$ 个有向图游戏组成的组合游戏，设它们的起点分别为 $s_1, s_2, \ldots, s_n$，则有定理：当且仅当 $\operatorname{SG}(s_1) \oplus \operatorname{SG}(s_2) \oplus \ldots \oplus \operatorname{SG}(s_n) \neq 0$ 时，这个游戏是先手必胜的。同时，这是这一个组合游戏的游戏状态 $x$ 的 $SG$ 值。

## 经典博弈模型

### anti-Nim 博弈

有两个绝顶聪明的人在玩取石子游戏，假设有 $n$ 堆石子，每个人可以轮流选择某一堆然后从中拿走任意数量的石子(不能为 0)，取走最后一颗石子的一方失败，问先手还是后手胜利。

必胜局面只有两种情况：

- 所有堆的石子数都为 1 并且所有堆石子数异或和为 0
- 存在一堆石子数大于 1 并且所有堆石子数异或和不为 0

### Nim-k 博弈

有两个绝顶聪明的人在玩取石子游戏，假设有 $n$ 堆石子，每个人可以轮流在不超过 $k$ 堆石子中拿走任意数量的石子(不能为 0)，无法拿石子的一方失败，问先手还是后手胜利。

比败态：所有堆石子数在二进制下的各位上的 1 的数目都满足是 $k+1$ 的倍数

### Nim-m 博弈

有两个绝顶聪明的人在玩取石子游戏，假设有 $n$ 堆石子，每个人可以轮流在任意一堆石子中中拿走不超过 $k$ 个石子(不能为0)，无法拿石子的一方失败，问先手还是后手胜利。

比败态：所有堆石子数模 $k+1$ 的异或和为 0

### 阶梯博弈

有两个绝顶聪明的人在玩取石子游戏，假设有 $n$ 堆石子放在标号为 $1\sim n$ 的台阶上，台阶高度按标号递增，0 标号代表地面。现在每个人轮流取石子，每次可以从标号为 $i(i>0)$ 的台阶上取任意数量(不能为 0)的石子放在标号为 $i-1$ 的台阶上。如果没有石子可取就失败，问先手胜利还是后手胜利。

对 $i$ 是奇数的阶梯玩 Nim 游戏

### 威佐夫博弈

有两堆各若干个石子，两个人轮流：

- 从某一堆取至少一个石子
- 同时从两堆中取同样多的石子

最后取光者得胜，问先手胜还是后手胜

设两堆石子有 $(x,y)$ 个，$x<y$，比败态当且仅当 $\lfloor(y-x)\times\frac{\sqrt{5}+1}{2}\rfloor=x$


### 斐波那契博弈

有一堆个数为 $n(n>=2)$的石子，两人轮流取石子

- 先手第一次取石子的时候不能取完
- 此后每个人取的石子数量都不能超过对方最近一次取石子数量的两倍

取完最后一颗石子的人胜利，问先手胜还是以后手胜

比败态当且仅当石子数时斐波那契数

### take & break模型

给定 $n$ 堆石子，双方轮流每次可以选择 $i,j,k$ 三堆石子 $(i<j\le k)$ ，满足第 $i$ 堆石子至少有一颗，然后从第 $i$ 堆石子中拿走一颗石子，然后在第 $j,k$ 堆石子中各加一颗石子(如果 $j=k$ 那么就加 $2$ 颗石子)，问先手必胜必败

注意到每个的石子相互独立，相当于每个石子进行博弈，石子只与位置相关。定义 $SG(i)$ 代表位置 $i$ 的石子，显然 $SG(x)=mex_{i<j\le k\le n}\{SG(j)\;xor\;SG(k)\}$，整个游戏的 SG 值是所有石子的 SG 值的异或和

> Written with [StackEdit中文版](https://stackedit.cn/).
